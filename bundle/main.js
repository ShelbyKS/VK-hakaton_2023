(()=>{"use strict";var e=function(e,t){return fetch("".concat("/api/v1","/survey/add"),{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},credentials:"include",body:JSON.stringify({attribute:e,metric:t})}).then((function(e){if(!e.ok)throw new Error("Ответ сервера не 200");return e.json()})).then((function(e){return e})).catch((function(e){throw new Error(e)}))},t=function(e){var t=document.querySelectorAll(e);t.forEach((function(e){e.addEventListener("click",(function(){t.forEach((function(e){e.classList.remove("selected")})),e.classList.add("selected")}))}))};document.addEventListener("DOMContentLoaded",(function(a){switch(window.location.pathname){case"/csi_feed":document.body.innerHTML='\n    <form name="csat" class="iframe">\n        <div class="iframe__title">Насколько вы удовлетворены подборками фильмов?</div>\n\n        <div class="emoji__bar">\n            <i class="emoji emoji__very-bad" data-value="1"></i>\n            <i class="emoji emoji__bad" data-value="2"></i>\n            <i class="emoji emoji__normal" data-value="3"></i>\n            <i class="emoji emoji__good" data-value="4"></i>\n            <i class="emoji emoji__very-good" data-value="5"></i>\n        </div>\n\n        <button class="iframe__button" type="submit">\n            Отправить\n        </button>\n    </form>',t(".emoji"),document.querySelector(".iframe").addEventListener("submit",(function(t){t.preventDefault(),console.log(document.querySelector(".selected").getAttribute("data-value")),e("csi_feed",document.querySelector(".selected").getAttribute("data-value")).then((function(e){e.ok&&(document.body.innerHTML="")}))}));break;case"/csi_profile":document.body.innerHTML='\n    <form name="csat" class="iframe">\n        <div class="iframe__title">Вам понятно как обновлять профиль?</div>\n\n        <div class="emoji__bar">\n            <i class="emoji emoji__very-bad" data-value="1"></i>\n            <i class="emoji emoji__bad" data-value="2"></i>\n            <i class="emoji emoji__normal" data-value="3"></i>\n            <i class="emoji emoji__good" data-value="4"></i>\n            <i class="emoji emoji__very-good" data-value="5"></i>\n        </div>\n\n        <button class="iframe__button" type="submit">\n            Отправить\n        </button>\n    </form>',t(".emoji"),document.querySelector(".iframe").addEventListener("submit",(function(t){t.preventDefault(),console.log(document.querySelector(".selected").getAttribute("data-value")),e("csi_profile",document.querySelector(".selected").getAttribute("data-value")).then((function(e){e.ok&&(document.body.innerHTML="")}))}));break;case"/nps":document.body.innerHTML='\n    <form name="csat" class="iframe">\n        <div class="iframe__title">Насколько вы готовы рекомендовать наш сервис?</div>\n\n        <div class="number__bar">\n            <div class="number__item" data-value="1">1</div>\n            <div class="number__item" data-value="2">2</div>\n            <div class="number__item" data-value="3">3</div>\n            <div class="number__item" data-value="4">4</div>\n            <div class="number__item" data-value="5">5</div>\n            <div class="number__item" data-value="6">6</div>\n            <div class="number__item" data-value="7">7</div>\n            <div class="number__item" data-value="8">8</div>\n            <div class="number__item" data-value="9">9</div>\n            <div class="number__item" data-value="10">10</div>\n        </div>\n\n        <button class="iframe__button" type="submit">\n            Отправить\n        </button>\n    </form>',t(".number__item"),document.querySelector(".iframe").addEventListener("submit",(function(t){t.preventDefault(),console.log(document.querySelector(".selected").getAttribute("data-value")),e("nps",document.querySelector(".selected").getAttribute("data-value")).then((function(e){e.ok&&(document.body.innerHTML="")}))}));break;case"/csat":!function(){document.body.innerHTML='\n    <form name="csat" class="iframe">\n        <div class="iframe__title">Насколько вы удовлетворены нашим сайтиком?</div>\n\n        <div class="emoji__bar">\n            <i class="emoji emoji__star" data-value="1"></i>\n            <i class="emoji emoji__star" data-value="2"></i>\n            <i class="emoji emoji__star" data-value="3"></i>\n            <i class="emoji emoji__star" data-value="4"></i>\n            <i class="emoji emoji__star" data-value="5"></i>\n        </div>\n\n        <button class="iframe__button" type="submit">\n            Отправить\n        </button>\n    </form>';var t=document.querySelectorAll(".emoji__star");t.forEach((function(e,a){e.addEventListener("click",(function(){var n=parseInt(e.getAttribute("data-value"));t.forEach((function(e,t){var i=parseInt(e.getAttribute("data-value"));t===a?e.classList.add("selected"):(e.classList.remove("selected"),e.classList.toggle("helper",i<=n))}))}))})),document.querySelector(".iframe").addEventListener("submit",(function(t){t.preventDefault(),console.log(document.querySelector(".selected").getAttribute("data-value")),e("csat",document.querySelector(".selected").getAttribute("data-value")).then((function(e){e.ok&&(document.body.innerHTML="")}))}))}()}}))})();